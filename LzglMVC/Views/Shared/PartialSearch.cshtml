@model Models.Employee

<script src="~/Scripts/jquery-1.7.1.min.js"></script>
<script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
<style>
    #NameList{
        position:absolute;
        z-index:9999;
        display:none;
        left:20px;
    }
    #partial{
        position:relative;
    }/**/
</style>
<!--查询分布视图：提供结果，返回Employee的列表-->
<div id="partial">
    <div class="container container-small">
        @using (Ajax.BeginForm("Search", "SysAdmin", new AjaxOptions { UpdateTargetId = "Info", OnSuccess = "ShowEmpList" }))
        {
            <div class="form-group">
                <div class="input-group">
                    <input type="text" class="form-control" name="TxtSearch" placeholder="身份证号码/电话号码/职工号/姓名" />
                    <div class="input-group-btn">
                        <input type="submit" class="btn btn-default" value="查 询" />
                    </div>
                </div>
            </div>
        }
        
        <ol class="reg_error"></ol>
        <div class="form-group" id="Info"></div>
    </div>
    <div id="NameList" class="list-group"></div>
</div>
<script>
    //根据姓名查询，返回emp集合
    function ShowEmpList() {
        if ($('#Info').html() != "查询失败！") {     //控制器返回的数据放在“Info”这个元素里
            var list = JSON.parse($('#Info').html());
            $('#Info').css('display', 'none');      //
            $('#NameList .empItem').remove();     //清空列表
            var item = "";
            for (var i = 0; i < list.length; i++) {
                item = '<a href="#" class="empItem list-group-item" id="' + list[i]["Empid"] + '" name="' + list[i]["Name"] +
                    '">' +
                    list[i]["Name"] + ',' +
                    list[i]["Gender"] + ',' +
                    list[i]["Idcard"] + ',' +
                    list[i]["Position"]["Dept"]["DepName"] +
                    '</a>';
                $('#NameList').append(item);
                $('#NameList').css('display', 'block');
            }
        } else {
            $('#Info').css('display', 'block');
        }
    }
</script>